## 1. Mysql查询语句的书写顺序

**Select**   [distinct ]  <字段名称>  **from**  表1   [ <join类型>  join 表2  on <join条件>   ]  **where** <where条件>  **group by** <字段> 

**having** <having条件>   **order by** <排序字段>  **limit** <起始偏移量,行数>



## 2. Mysql查询语句的执行顺序

（8）Select
（9）distinct 字段名1,字段名2，
（7）[fun(字段名)]  
（1）from 表1
（3）<join类型>join 表2 
（2）on <join条件> 
（4）where <where条件> 
（5）group by <字段> 
（6）having <having条件> 
（10）order by <排序字段> 
（11）limit <起始偏移量,行数>



## 3. Mysql 如何实现多表查询

MYSQL多表查询主要使用连接查询  , 连接查询的方式主要有 : 

- 内连接  
  - 隐式内连接 :  Select 字段   From 表A , 表B where 连接条件
  - 显式内连接  :  Select 字段   From 表A  inner join  表B  on 连接条件
- 外连接
  - 左外连接 : Select 字段   From 表A  left outer join  表B  on 连接条件
  - 右外连接 : Select 字段   From 表A  right outer  join  表B  on 连接条件
  - 全外连接：(很少用)
- 交叉连接 : (很少用)



## 4. MYSQL内连接和外连接的区别 ? 

1. 语法不同 , 内连接使用 inner join关键字 , 外连接使用outer join关键字 
2. 查询结果集不同 ; 
   - 内连接 : 查询的是满足连接条件的二张表数据组合
   - 左外连接 : 查询的是左表的所有数据, 以及满足连接条件的二张表数据组合
   - 右外连接 : 查询的是右表所有数据, 以及满足连接条件的二张表数据组合



## 5. CHAR和VARCHAR的区别？

1. char的长度是不可变的，用空格填充到指定长度大小，而varchar的长度是可变的。
2. char的存取速度比varchar要快得多
3. char的存储方式是：对英文字符（ASCII）占用1个字节，对一个汉字占用两个字节。
   varchar的存储方式是：对每个英文字符占用2个字节，汉字也占用2个字节。





## 6. 了解过Mysql的索引嘛 ? 

MYSQL索引主要有 : **单列索引** , **组合(多列)索引**和**空间索引** , 用的比较多的就是单列索引和组合索引 , 空间索引我这边没有用到过

**单列索引 :** 在MYSQL数据库表的某一列上面创建的索引叫单列索引 , 单列索引又分为                

- 普通索引：MySQL中基本索引类型，没有什么限制，允许在定义索引的列中插入重复值和空值，纯粹为了查询数据更快一点。

- 唯一索引：索引列中的值必须是唯一的，但是允许为空值

- 主键索引：是一种特殊的唯一索引，不允许有空值

- 全文索引： 只有在MyISAM引擎、InnoDB（5.6以后）上才能使⽤用，而且只能在CHAR,VARCHAR,TEXT类型字段上使⽤用全⽂文索引。 

**组合索引 :** 在MYSQL数据库表的多个字段组合上创建的索引  , 称为组合索引也叫联合索引

- 组合索引的使用，需要遵循左前缀原则

- 一般情况下，建议使用组合索引代替单列索引（主键索引除外）



## 7. 索引的底层数据结构了解过嘛 ? 

索引是在**存储引擎中实现**的，也就是说不同的存储引擎，会使用不同的索引

MyISAM和InnoDB存储引擎：只⽀支持**B+ TREE索引**， 也就是说默认使用BTREE，不能够更换

MEMORY/HEAP存储引擎：支持HASH和BTREE索引

> 回顾之前学习的基础数据结构 : 
>
> 数组
>
> 链表
>
> 树 : 红黑树, 二叉树 , 平衡二叉树 , B树 , B+树
>
> ....



## 8. MYSQL支持的存储引擎有哪些, 有什么区别 ?

![image-20220521114720326](assets\image-20220521114720326.png)

MYSQL存储引擎有很多, 常用的就二种 : **MyISAM**和**InnerDB** , 者两种存储引擎的区别 ; 

- MyISAM支持256TB的数据存储 , InnerDB只支持64TB的数据存储
- MyISAM 不支持事务 , InnerDB支持事务
- MyISAM 不支持外键 , InnerDB支持外键



## 9. 什么是聚簇索引什么是非聚簇索引 ?

**聚簇索引**

在使用`InnoDB`存储引擎的时候, 主键索引B+树叶子节点会存储数据行记录，简单来说**数据和索引在一起存储** , 这就是聚簇索引

![image-20220521115124008](assets\image-20220521115124008.png)

**非聚簇索引**

在使用`MyISAM`存储引擎的时候, B+树叶子节点只会存储数据行的指针，简单来说**数据和索引不在一起**  , 这就是非聚簇索引

![image-20220521115228139](assets\image-20220521115228139.png)



## 10. 在一个非主键字段上创建了索引, 想要根据该字段查询到数据, 需要查询几次 ? 

需要查询二次 

如果使用`MyISAM`存储引擎 , 会首先根据索引查询到数据行指针, 再根据指针获取数据

如果是`InnoDB`存储引擎 , 会根据索引查找指定数据关联的主键ID , 再根据主键ID去主键索引中查找数据



## 11. 知道什么是回表查询嘛 ? 

当我们为一张表的`name`字段建立了索引 , 执行如下查询语句 : 

`select name,age from user where name='Alice'`

那么获取到数据的过程为 : 

1. 根据`name='Alice'`查找索引树 , 定位到匹配数据的主键值为` id=18`

   ![image-20220521115651825](assets\image-20220521115651825.png)

2. 根据`id=18`到主索引获取数据记录  (回表查询)

   ![image-20220521115705653](assets\image-20220521115705653.png)

   

**先定位主键值，再定位行记录就是所谓的回表查询，它的性能较扫一遍索引树低 **



## 12. 知道什么叫覆盖索引嘛 ? 

覆盖索引是指只需要在一棵索引树上就能获取SQL所需的所有列数据 , 因为无需回表查询效率更高



实现覆盖索引的常见方法是：将被查询的字段，建立到联合索引里去。

执行如下查询语句 : `select name,age from user where name='Alice'`

因为要查询 `name `和 `age`二个字段 , 那么我们可以建立组合索引

```sql
create index index_name_age on user(name,age) 
```

那么索引存储结构如下 : 





![img](assets\20171001102830565)

这种情况下, 执行`select name,age from user where name='Alice'` , 会先根据`name='Alice'`, 找到记录 , 这条记录的索引上刚好又包含了 age 数据 , 直接把 ` Alice 77 `数据返回 , 就不会执行回表查询 , 这就是覆盖索引
